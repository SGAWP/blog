<div class="login-page">
    <div class="content">
        <form class="login-form" [formGroup]="form">
            <div class="loading-shade" *ngIf="loading">
                <mat-spinner></mat-spinner>
            </div>
            <mat-toolbar fxLayout="row" fxLayout.lt-md="column">
                <span fxFlex></span>
                <img class="logo" src="../../../assets/images/logo.png">
                <b>{{title}}</b>
                <span fxFlex></span>
            </mat-toolbar>
            <div fxLayout="row" fxLayout.xs="column">
                <div fxFlex="100">
                    <mat-form-field appearance="outline" class="w-full">
                        <mat-label>Email</mat-label>
                        <input matInput autofocus formControlName="email" maxlength="200" autocomplete="off" required>
                        <mat-error
                            *ngIf="form.controls.email.hasError('email') && !form.controls.email.hasError('required')">
                            Please enter a valid email address.
                        </mat-error>
                        <mat-error *ngIf="form.controls.email.invalid">{{getEmailErrorMessage()}}</mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column">
                <div fxFlex="100">
                    <mat-form-field appearance="outline" class="w-full">
                        <mat-label>Username</mat-label>
                        <input matInput formControlName="username" maxlength="100" autocomplete="off" required>
                        <mat-error *ngIf="form.controls.username.invalid">
                            {{getUsernameErrorMessage()}}
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column">
                <div fxFlex="100">
                    <mat-form-field appearance="outline" class="w-full">
                        <mat-label>Password</mat-label>
                        <input matInput type="password" formControlName="password"
                            [ngClass]="{'invalid': form.get('password').invalid && form.get('password').touched}"
                            maxlength="100" autocomplete="off" required>
                        <mat-error *ngIf="form.controls.password.invalid">
                            {{getPasswordErrorMessage()}}
                        </mat-error>
                    </mat-form-field>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column">
                <div fxFlex="100">
                    <mat-form-field class="w-full" appearance="outline">
                        <mat-label>Password Confirm</mat-label>
                        <input matInput type="password" formControlName="confirmPassword" [errorStateMatcher]="matcher"
                            autocomplete="off" required>
                        <mat-error *ngIf="form.controls.confirmPassword.invalid || form">
                            {{getPasswordConfirmErrorMessage()}}
                        </mat-error>
                        <button mat-icon-button *ngIf="form.controls.confirmPassword.value" matSuffix
                            (click)="form.get('confirmPassword').setValue('')" matTooltip="Очистить">
                            <mat-icon>close</mat-icon>
                        </button>
                    </mat-form-field>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column" class="pb20 pbm20">
                <div fxFlex="100">
                    <button class="w-full m-b-8" mat-raised-button color="primary"
                        [disabled]="form.invalid || form.disabled" (click)="onSignUp()">
                        Sign Up
                    </button>
                </div>
            </div>
            <div fxLayout="row" fxLayout.xs="column">
                <div fxFlex="50" class="mr10 pbm20">
                    <a class="w-full" mat-raised-button color="primary" routerLink="/auth/sign-in">
                        Sign In
                    </a>
                </div>
                <div fxFlex="50">
                    <a class="w-full" mat-raised-button color="primary" routerLink="/auth/reset-password">
                        Forgot password?
                    </a>
                </div>
            </div>
        </form>
    </div>
</div>